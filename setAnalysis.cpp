//====================================================================================================================================
// IMPLEMENTATION FILE: "setAnalysis"
//====================================================================================================================================
// Syntax      : setAnalysis(argc, argv, PATH, ITER)
//------------------------------------------------------------------------------------------------------------------------------------
// Purpose     : Sets the parameters for the analysis.
//------------------------------------------------------------------------------------------------------------------------------------
// Input       : ITER        : Number of iterations                               [1,1]
//------------------------------------------------------------------------------------------------------------------------------------
// Output      : ITER        : Number of iterations                               [1,1]
//------------------------------------------------------------------------------------------------------------------------------------
// Folder      :
//------------------------------------------------------------------------------------------------------------------------------------
// Description : <Sets parameters>
// Keywords    : <Path, Iteration, Method>
// Version     : <>
//====================================================================================================================================
// Written by Danilo S. Kusanovic, December 2013
// Last revised by D.S Kusanovic.
//====================================================================================================================================

#include <cstdlib>
#include <sstream>
#include <iostream>
#include <fstream>

void setAnalysis(int argc, char** argv, int &ITER, double** &REFINE) {

//------------------------------------------------------------------------------------------------------------------------------------
// INPUT ARGUMENT PARSING:
//------------------------------------------------------------------------------------------------------------------------------------
    switch(argc) {
    case 1: {
        ITER = 8;
        break;
    }

    case 2: {
        ITER = atoi(argv[1]);
        break;
    }

    default: {
        break;
    }
    }

//------------------------------------------------------------------------------------------------------------------------------------
// COPIES THE INPUT MESH FILE:
//------------------------------------------------------------------------------------------------------------------------------------
    std::ifstream  src("MeshData.txt", std::ios::binary);
    std::ofstream  dst("3d_refined.mesh3d",   std::ios::binary);
    dst << src.rdbuf();


//------------------------------------------------------------------------------------------------------------------------------------
// REFINEMENT INFORMATION:
//------------------------------------------------------------------------------------------------------------------------------------
    //Memory Allocation for Coordinates:
    REFINE = new double* [ITER];

    for(int i = 0; i < ITER; i++) {
        REFINE[i] = new double[4];
    }

    //Initialization of REFINE Vector:
    for(int i = 0; i < ITER; i++) {
        for(int j =0; j <4; j++) {
            REFINE[i][j] = 0.0;
        }
    }

}

//====================================================================================================================================
// EOF
//====================================================================================================================================

